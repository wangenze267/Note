import{_ as s,c as n,o as a,a as l}from"./app.bb723de0.js";const y=JSON.parse('{"title":"OCR 重构分析","description":"","frontmatter":{},"headers":[{"level":2,"title":"一、原型及需求分析","slug":"一、原型及需求分析","link":"#一、原型及需求分析","children":[{"level":3,"title":"1、原型分析及拆解","slug":"_1、原型分析及拆解","link":"#_1、原型分析及拆解","children":[]},{"level":3,"title":"2、需求拆解及分析","slug":"_2、需求拆解及分析","link":"#_2、需求拆解及分析","children":[]}]},{"level":2,"title":"二、现有代码分析","slug":"二、现有代码分析","link":"#二、现有代码分析","children":[{"level":3,"title":"现有连线逻辑分析","slug":"现有连线逻辑分析","link":"#现有连线逻辑分析","children":[]},{"level":3,"title":"3、现有数据内容对应关系分析","slug":"_3、现有数据内容对应关系分析","link":"#_3、现有数据内容对应关系分析","children":[]}]},{"level":2,"title":"三、待补充代码分析","slug":"三、待补充代码分析","link":"#三、待补充代码分析","children":[{"level":3,"title":"多对多关系分析","slug":"多对多关系分析","link":"#多对多关系分析","children":[]},{"level":3,"title":"连线方案分析","slug":"连线方案分析","link":"#连线方案分析","children":[]},{"level":3,"title":"三屏、双屏切换时位置缩放计算","slug":"三屏、双屏切换时位置缩放计算","link":"#三屏、双屏切换时位置缩放计算","children":[]}]},{"level":2,"title":"四、数据结构设计","slug":"四、数据结构设计","link":"#四、数据结构设计","children":[{"level":3,"title":"批注数据结构设计","slug":"批注数据结构设计","link":"#批注数据结构设计","children":[]},{"level":3,"title":"OCR 数据结构设计","slug":"ocr-数据结构设计","link":"#ocr-数据结构设计","children":[]},{"level":3,"title":"icon 数据结构设计","slug":"icon-数据结构设计","link":"#icon-数据结构设计","children":[]}]},{"level":2,"title":"五、细节功能设计","slug":"五、细节功能设计","link":"#五、细节功能设计","children":[{"level":3,"title":"icon 定位方案","slug":"icon-定位方案","link":"#icon-定位方案","children":[]},{"level":3,"title":"批注连线设计方案","slug":"批注连线设计方案","link":"#批注连线设计方案","children":[]}]}],"relativePath":"code_life/知识分享/01.Ocr重构分析.md"}'),e={name:"code_life/知识分享/01.Ocr重构分析.md"},i=l(`<h1 id="ocr-重构分析" tabindex="-1">OCR 重构分析 <a class="header-anchor" href="#ocr-重构分析" aria-hidden="true">#</a></h1><h2 id="一、原型及需求分析" tabindex="-1">一、原型及需求分析 <a class="header-anchor" href="#一、原型及需求分析" aria-hidden="true">#</a></h2><h3 id="_1、原型分析及拆解" tabindex="-1">1、原型分析及拆解 <a class="header-anchor" href="#_1、原型分析及拆解" aria-hidden="true">#</a></h3><img src="https://img.wangez.site/img/ocr%E5%8E%9F%E5%9E%8B%E6%A6%82%E5%BF%B5%E5%9B%BE.jpg" width="600px"><p>页面主题区域大约分为四部分，分别为 <strong>原图</strong> 区域、解析出来的 OCR 文本区域、<strong>批注</strong> 区域、以及根据批注生成在 OCR 文本 <strong>对应行高</strong> 位置的 <strong>icon</strong> 区域。</p><p>根据交互，其中原图与 OCR 区域的可视效果可随交互的变化进行 <strong>显示</strong> 和 <strong>隐藏</strong>。</p><p>且，原图与 OCR 内容包含 <strong>缩放交互</strong>。</p><h3 id="_2、需求拆解及分析" tabindex="-1">2、需求拆解及分析 <a class="header-anchor" href="#_2、需求拆解及分析" aria-hidden="true">#</a></h3><p>需求如下：</p><ul><li>在 OCR 文本区域进行鼠标滑动批注，添加批注后，高亮鼠标选中的 OCR 区域，对应批注应在右侧批注区域显示出来。</li><li>点击批注可触发连线，连接到对应批注的 OCR 区域和对应的原图区域（高亮显示）</li><li>文件有多个，当点击的批注不是当前文件时，要跳转到被点击的批注对应的文件</li><li>批注后，触发连线的方式共有 <strong>三种</strong>：点击右侧批注的文件标签（即上文所说的点击批注），点击高亮的 OCR 区域，点击 OCR 区域对应生成的 icon</li></ul><p>分析如下：</p><ul><li>一条批注意见可以对应 OCR 上的多个批注位置，一条批注可以拥有不同位置的多个 icon，近而可对应原图中的多个位置</li><li>一个icon 只对应 一条 OCR 上的批注，<strong>注意：icon 存在堆叠情况，此时 icon 可能对应多个批注</strong></li><li>要尽量保持连线逻辑单一，方便后续维护</li></ul><img src="https://img.wangez.site/img/%E8%BF%9E%E7%BA%BF%E9%80%BB%E8%BE%91%E8%AE%BE%E8%AE%A1.jpg" width="600px"><p>新增需求如下：</p><ul><li>PDF 文件，按页码拆分成多个图片，但是批注仍按一个 PDF 文件处理</li></ul><p>分析如下：</p><ul><li>在现有的文件数据结构下，针对 <strong>非图片的情况进行处理</strong> （目前仅为 PDF）</li><li>每个文件种类应有特殊字段标识，接口新增 type 字段</li><li>PDF 与其拆分成的图片的结构关系，按 children 进行处理 (Tree)</li></ul><h2 id="二、现有代码分析" tabindex="-1">二、现有代码分析 <a class="header-anchor" href="#二、现有代码分析" aria-hidden="true">#</a></h2><h3 id="现有连线逻辑分析" tabindex="-1">现有连线逻辑分析 <a class="header-anchor" href="#现有连线逻辑分析" aria-hidden="true">#</a></h3><p>现有的连线逻辑为，点击 OCR 区域内的关键词，触发连线至两侧的原图以及批注区域。</p><blockquote><p>介于 OCR 可以被隐藏的交互，加上需求明显是以意见为主体进行关系设计，选择放弃此路，连线的出发点不应在中间。</p></blockquote><p>现有的左侧原图区域的视觉交互高亮，与新需求相同，可以复用。</p><blockquote><p>但是原先的连线逻辑为 一对一对一，现在明显会存在 一对多，所以要进行改造</p></blockquote><p>原先代码：</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--原先的高亮 Dom--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Dom</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">传进来的位置信息，利用此信息使得Dom定位至原图对应位置</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--原先的传入对象:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    lineWordItem:{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        location: {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            top,left,width,height</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        },</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        word: 关键词信息,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        ...Other</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    }</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>改造后代码：</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--改造后的高亮 Dom--&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">v-for</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Dom</span><span style="color:#89DDFF;">  </span><span style="color:#C792EA;">:style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">传进来的位置信息，利用此信息使得Dom定位至原图对应位置</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!--改造后的传入对象:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    lineWordItem:[</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            location: {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">                top,left,width,height</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            },</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            word: 关键词信息,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            ...Other</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        }</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        ...Others</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    ]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_3、现有数据内容对应关系分析" tabindex="-1">3、现有数据内容对应关系分析 <a class="header-anchor" href="#_3、现有数据内容对应关系分析" aria-hidden="true">#</a></h3><h2 id="三、待补充代码分析" tabindex="-1">三、待补充代码分析 <a class="header-anchor" href="#三、待补充代码分析" aria-hidden="true">#</a></h2><h3 id="多对多关系分析" tabindex="-1">多对多关系分析 <a class="header-anchor" href="#多对多关系分析" aria-hidden="true">#</a></h3><h3 id="连线方案分析" tabindex="-1">连线方案分析 <a class="header-anchor" href="#连线方案分析" aria-hidden="true">#</a></h3><h3 id="三屏、双屏切换时位置缩放计算" tabindex="-1">三屏、双屏切换时位置缩放计算 <a class="header-anchor" href="#三屏、双屏切换时位置缩放计算" aria-hidden="true">#</a></h3><h2 id="四、数据结构设计" tabindex="-1">四、数据结构设计 <a class="header-anchor" href="#四、数据结构设计" aria-hidden="true">#</a></h2><h3 id="批注数据结构设计" tabindex="-1">批注数据结构设计 <a class="header-anchor" href="#批注数据结构设计" aria-hidden="true">#</a></h3><h3 id="ocr-数据结构设计" tabindex="-1">OCR 数据结构设计 <a class="header-anchor" href="#ocr-数据结构设计" aria-hidden="true">#</a></h3><h3 id="icon-数据结构设计" tabindex="-1">icon 数据结构设计 <a class="header-anchor" href="#icon-数据结构设计" aria-hidden="true">#</a></h3><h2 id="五、细节功能设计" tabindex="-1">五、细节功能设计 <a class="header-anchor" href="#五、细节功能设计" aria-hidden="true">#</a></h2><h3 id="icon-定位方案" tabindex="-1">icon 定位方案 <a class="header-anchor" href="#icon-定位方案" aria-hidden="true">#</a></h3><h3 id="批注连线设计方案" tabindex="-1">批注连线设计方案 <a class="header-anchor" href="#批注连线设计方案" aria-hidden="true">#</a></h3>`,39),t=[i];function p(r,c,o,h,d,u){return a(),n("div",null,t)}const g=s(e,[["render",p]]);export{y as __pageData,g as default};
